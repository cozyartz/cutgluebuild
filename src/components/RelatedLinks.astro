---
export interface RelatedLink {
  title: string;
  description: string;
  url: string;
  category: 'tools' | 'templates' | 'guides' | 'features';
  keywords?: string;
}

export interface Props {
  links: RelatedLink[];
  title?: string;
  showCategory?: boolean;
}

const { links, title = "Related AI Tools & Resources", showCategory = true } = Astro.props;

const categoryEmojis = {
  tools: "🛠️",
  templates: "📐", 
  guides: "📖",
  features: "✨"
};

const categoryColors = {
  tools: "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",
  templates: "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200", 
  guides: "bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",
  features: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"
};
---

<section class="mt-16 mb-12 p-8 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700">
  <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center">
    🔗 {title}
  </h2>
  
  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    {links.map((link) => (
      <article class="group">
        <a 
          href={link.url}
          class="block p-6 rounded-xl border-2 border-gray-200 dark:border-gray-700 hover:border-primary-300 dark:hover:border-primary-600 transition-all duration-300 hover:shadow-lg bg-gray-50 dark:bg-gray-900"
          title={`${link.title} - ${link.description}`}
        >
          <div class="flex items-start justify-between mb-3">
            <h3 class="font-semibold text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-200">
              {categoryEmojis[link.category]} {link.title}
            </h3>
            
            {showCategory && (
              <span class={`px-2 py-1 text-xs rounded-full font-medium ${categoryColors[link.category]}`}>
                {link.category}
              </span>
            )}
          </div>
          
          <p class="text-sm text-gray-600 dark:text-gray-300 line-clamp-3 mb-3">
            {link.description}
          </p>
          
          {link.keywords && (
            <div class="flex flex-wrap gap-1 mt-2">
              {link.keywords.split(',').slice(0, 3).map((keyword) => (
                <span class="px-2 py-1 bg-gray-200 dark:bg-gray-700 text-xs rounded-md text-gray-600 dark:text-gray-400">
                  {keyword.trim()}
                </span>
              ))}
            </div>
          )}
          
          <div class="mt-4 flex items-center text-primary-500 text-sm font-medium">
            Explore →
          </div>
        </a>
      </article>
    ))}
  </div>
  
  <!-- SEO Context for Internal Links -->
  <div class="mt-6 text-xs text-gray-500 dark:text-gray-400">
    <p>💡 Discover more AI-powered CNC tools and laser cutting resources to enhance your fabrication workflow</p>
  </div>
</section>

<style>
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>