---
title: Development Setup Guide
description: Complete guide to setting up your local development environment for CutGlueBuild
---

import { Card, CardGrid, Badge, Aside } from '@astrojs/starlight/components';

# Development Setup Guide

Get your CutGlueBuild development environment up and running quickly with this comprehensive setup guide.

## Prerequisites

Before you begin, ensure you have these tools installed:

<CardGrid>
  <Card title="Node.js 18+" icon="laptop">
    **Required for Astro and package management**
    
    Download from [nodejs.org](https://nodejs.org/) or use a version manager like nvm.
    
    ```bash
    node --version  # Should be 18.0.0 or higher
    npm --version   # Should be included with Node.js
    ```
  </Card>
  
  <Card title="Git" icon="github">
    **Version control and repository management**
    
    Download from [git-scm.com](https://git-scm.com/) or install via your package manager.
    
    ```bash
    git --version
    ```
  </Card>
  
  <Card title="Code Editor" icon="pencil">
    **VS Code recommended with extensions:**
    
    - Astro
    - TypeScript and JavaScript
    - Tailwind CSS IntelliSense
    - Prettier
  </Card>
  
  <Card title="Wrangler CLI" icon="terminal">
    **Cloudflare's command line tool**
    
    ```bash
    npm install -g wrangler
    wrangler --version
    ```
    
    Required for D1 database management and Cloudflare deployments.
  </Card>
</CardGrid>

## Environment Setup

### 1. Clone the Repository

```bash
git clone https://github.com/cozyartz/cutgluebuild.git
cd cutgluebuild
```

### 2. Install Dependencies

```bash
npm install
```

This will install all required packages including:
- Astro 4.x with Cloudflare adapter
- React and TypeScript
- Tailwind CSS
- Fabric.js for canvas editing
- Zustand for state management

### 3. Environment Variables

Create your environment file:

```bash
cp .env.example .env
```

Configure the following variables in `.env`:

<Aside type="tip">
  **Development Tip**: The app gracefully handles missing environment variables. OpenAI features fall back to mock data, and database operations use mock clients during local development.
</Aside>

#### Required for Full Functionality

```bash
# Cloudflare Configuration
CLOUDFLARE_ACCOUNT_ID=your_cloudflare_account_id
CLOUDFLARE_API_TOKEN=your_api_token_with_d1_permissions

# Stripe Configuration  
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...

# Site Configuration
VITE_SITE_URL=http://localhost:4321
```

#### Optional Enhancements

```bash
# OpenAI Integration (falls back to mock data)
OPENAI_API_KEY=sk-...

# Affiliate Program
VITE_AMAZON_ASSOCIATE_TAG=your-associate-tag
```

### 4. Database Setup (Optional)

For full database functionality, set up a Cloudflare D1 database:

1. **Create D1 Database**
   ```bash
   # Create database
   wrangler d1 create cutgluebuild-db
   
   # Note the database ID returned and update wrangler.toml
   ```

2. **Update Configuration**
   Edit `wrangler.toml` and replace `your-database-id-here` with your actual database ID:
   ```toml
   [[d1_databases]]
   binding = "DB"
   database_name = "cutgluebuild-db"
   database_id = "your-actual-database-id"
   ```

3. **Run Migrations**
   ```bash
   # Run initial schema
   wrangler d1 execute cutgluebuild-db --file migrations/0001_initial_schema.sql
   
   # Populate sample templates
   wrangler d1 execute cutgluebuild-db --file migrations/0002_populate_templates.sql
   ```

## Development Commands

<CardGrid>
  <Card title="Development Server" icon="rocket">
    ```bash
    npm run dev
    ```
    
    Starts Astro dev server at `http://localhost:4321` with:
    - Hot module reloading
    - TypeScript checking
    - Tailwind CSS compilation
  </Card>
  
  <Card title="Production Build" icon="puzzle">
    ```bash
    npm run build
    ```
    
    Builds for production with:
    - TypeScript compilation
    - Astro static site generation
    - Asset optimization
  </Card>
  
  <Card title="Preview Build" icon="magnifier">
    ```bash
    npm run preview
    ```
    
    Preview production build locally to test:
    - Static generation
    - Routing
    - Asset loading
  </Card>
  
  <Card title="Type Checking" icon="approve">
    ```bash
    astro check
    ```
    
    Validates TypeScript and Astro components:
    - Type errors
    - Component props
    - Missing imports
  </Card>
</CardGrid>

## Database Commands

<CardGrid>
  <Card title="Local Database Query" icon="database">
    ```bash
    wrangler d1 execute cutgluebuild-db --command "SELECT * FROM profiles LIMIT 10"
    ```
    
    Query your local D1 database for testing and debugging.
  </Card>
  
  <Card title="Run Migration" icon="arrow-up">
    ```bash
    wrangler d1 execute cutgluebuild-db --file migrations/new_migration.sql
    ```
    
    Execute a new migration file against your database.
  </Card>
  
  <Card title="Database Shell" icon="terminal">
    ```bash
    wrangler d1 execute cutgluebuild-db --command ".schema"
    ```
    
    Explore your database schema and structure.
  </Card>
  
  <Card title="Production Deploy" icon="rocket">
    ```bash
    wrangler d1 migrations apply cutgluebuild-db
    ```
    
    Apply migrations to production database.
  </Card>
</CardGrid>

## Project Structure Overview

```
cutgluebuild/
├── public/                 # Static assets
├── src/
│   ├── components/        # React components
│   │   ├── home/         # Homepage sections  
│   │   ├── tools/        # AI tool components
│   │   └── templates/    # Template components
│   ├── content/          # Content collections
│   │   ├── blog/        # Blog posts (MDX)
│   │   └── docs/        # Documentation (MDX)  
│   ├── layouts/          # Astro layouts
│   ├── lib/              # Utilities and services
│   │   ├── auth.ts      # Session-based authentication
│   │   ├── database.ts  # D1 database client
│   │   ├── openai.ts    # AI integration  
│   │   └── affiliates.ts # Affiliate management
│   ├── pages/            # Astro pages and routes
│   │   └── api/         # Cloudflare Workers API endpoints
│   ├── store/            # Zustand state management
│   └── styles/           # Global CSS and Tailwind
├── migrations/           # D1 database migrations
├── templates/            # SVG template files
└── wrangler.toml        # Cloudflare configuration
```

## Key Development Patterns

### Astro Islands Architecture

CutGlueBuild uses Astro's islands architecture:

- **Static by default**: Pages are server-rendered HTML
- **Interactive islands**: React components with `client:load` directive
- **Shared state**: Zustand for cross-component state management

```astro
---
// Astro component (server-rendered)
import InteractiveComponent from '../components/InteractiveComponent.tsx';
---

<div>
  <h1>Static Content</h1>
  <!-- Interactive React component -->
  <InteractiveComponent client:load />
</div>
```

### Authentication Flow

1. **Session-based authentication** using httpOnly cookies
2. **Server-side validation** in Astro pages for protected routes
3. **Client-side state** managed by Zustand with persistence

```typescript
// In Astro pages
const sessionId = getSessionFromRequest(Astro.request);
const user = await authService.getCurrentUser(sessionId);
if (!user) {
  return Astro.redirect('/login');
}

// In React components  
const { user, isLoading } = useAuthStore();
```

### Database Integration

- **API endpoints** in `src/pages/api/` for database operations
- **D1 database service** for type-safe database queries  
- **Session-based authorization** ensures data access control

### Content Management

- **Blog posts**: MDX files in `src/content/blog/`
- **Documentation**: MDX files in `src/content/docs/`
- **Type-safe**: Defined schemas in `src/content.config.ts`

## Development Workflow

### 1. Feature Development

```bash
# Create feature branch
git checkout -b feature/your-feature-name

# Start development server
npm run dev

# Make changes and test
# ... development work ...

# Type check and build
npm run build

# Commit changes
git add .
git commit -m "feat: your feature description"
```

### 2. Database Changes

For schema modifications:

```bash
# Create migration file
touch migrations/0003_your_migration_name.sql

# Edit migration file with SQL changes

# Test migration locally
wrangler d1 execute cutgluebuild-db --file migrations/0003_your_migration_name.sql

# Deploy to production when ready
wrangler d1 migrations apply cutgluebuild-db
```

### 3. Component Development

When creating new components:

1. **Follow TypeScript patterns** from existing components
2. **Use Tailwind classes** consistently with the design system
3. **Add proper types** for props and state
4. **Test both light and dark modes**

### 4. Content Creation

For blog posts and documentation:

1. **Create MDX file** in appropriate content directory
2. **Follow frontmatter schema** defined in `content.config.ts`
3. **Use components** from Starlight for documentation
4. **Test responsive design** and reading experience

## Troubleshooting

### Common Issues

<Aside type="caution">
  **Build Errors**: If you encounter build errors, ensure all environment variables are properly configured or use the mock fallbacks.
</Aside>

**Port Already in Use**
```bash
# Kill process on port 4321
lsof -ti:4321 | xargs kill -9

# Or use different port
npm run dev -- --port 3000
```

**TypeScript Errors**
```bash
# Clear TypeScript cache
rm -rf node_modules/.cache
npm run build

# Check specific errors
astro check
```

**D1 Database Connection Issues**
- Verify `wrangler.toml` has correct database ID
- Check Cloudflare account ID and API token
- Ensure database exists: `wrangler d1 list`

**Missing Dependencies**
```bash
# Clean install
rm -rf node_modules package-lock.json
npm install
```

### Development Tools

**Recommended VS Code Extensions:**
- Astro (official)
- TypeScript and JavaScript Language Features
- Tailwind CSS IntelliSense
- Prettier - Code formatter
- ES7+ React/Redux/React-Native snippets

**Browser Extensions:**
- React Developer Tools
- Cloudflare Workers Developer Tools

## Deployment

### Cloudflare Pages Deployment

1. **Build the project**
   ```bash
   npm run build
   ```

2. **Deploy to Cloudflare Pages**
   ```bash
   wrangler pages deploy dist
   ```

3. **Set up environment variables** in Cloudflare dashboard
4. **Apply database migrations** to production D1 database

### Environment Variables for Production

In your Cloudflare dashboard, set:
- `OPENAI_API_KEY` (if using AI features)
- `STRIPE_SECRET_KEY` (for payments)
- All other production environment variables

## Next Steps

Once your environment is set up:

1. **Explore the codebase** - Start with `src/pages/index.astro`
2. **Read the documentation** - Check out our [database schema reference](/docs/reference/database-schema/)
3. **Make a test change** - Try modifying a component
4. **Deploy to Cloudflare** - Test the full production workflow

---

*Need help? Check our [troubleshooting guide](/docs/development/troubleshooting/) or reach out to the team.*